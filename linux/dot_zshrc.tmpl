###############################
# Base configuration
###############################

source ~/.config/zsh/directories-and-navigation.sh;
source ~/.config/zsh/system-management.sh;
source ~/.config/zsh/misc.sh;
source ~/.config/zsh/fluid-framework.sh;
source ~/.config/zsh/history.sh;

###############################
# Configure PATH
###############################

export PATH=$HOME/bin:$PATH;
export PATH=/usr/local/bin:$PATH;
export PATH=$HOME/.local/share/fnm:$PATH;         # fnm
export PATH=${KREW_ROOT:-$HOME/.krew}/bin:$PATH;  # krew
export PATH=$PATH:/home/linuxbrew/.linuxbrew/bin; # Homebrew

###############################
# Key bindings
###############################

# Ctrl-backspace, delete word to the left of the cursor
bindkey "^H" backward-kill-word

# Ctrl + left/right arrows, move forward or backwards in the line
bindkey "^[[1;5C" forward-word
bindkey "^[[1;5D" backward-word

# Ctrl + up/down arrows, search through matching history
autoload -U up-line-or-beginning-search
autoload -U down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
bindkey "^[[A" up-line-or-beginning-search # Up
bindkey "^[[B" down-line-or-beginning-search # Down

###############################
# Tools & applications
###############################

# Enable fnm auto-use when opening a folder with a .node-version or .nvmrc file.
if [ "$(command -v fnm)" ]; then
  eval "$(fnm env --use-on-cd)";
fi

# Enable the navi widget
if [ "$(command -v navi)" ]; then
  eval "$(navi widget zsh)";
fi

# Use fzf
source /usr/share/doc/fzf/examples/key-bindings.zsh
source /usr/share/doc/fzf/examples/completion.zsh

###############################
# Prompt
###############################

# Use Oh-My-Zsh
#source ~/.config/use-ohmyzsh.sh

# Use Oh-My-Posh
eval "$(oh-my-posh init zsh --config "~/.config/alexvy86.omp.json")"
